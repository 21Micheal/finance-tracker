{"version":3,"file":"react-plaid-link.js","names":["checkExisting","handleLoad","handleError","error","renameKeyInObject","createPlaidHandler","createPlaid","noop","usePlaidLink","PlaidLink","PlaidEmbeddedLink","exports"],"sources":["../../react-plaid-link/dist/index.umd.js"],"sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('react')) :\n  typeof define === 'function' && define.amd ? define(['exports', 'react'], factory) :\n  (global = global || self, factory(global.PlaidLink = {}, global.React));\n}(this, (function (exports, React) { 'use strict';\n\n  var React__default = 'default' in React ? React['default'] : React;\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      enumerableOnly && (symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      })), keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = null != arguments[i] ? arguments[i] : {};\n      i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n\n    return target;\n  }\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _objectWithoutPropertiesLoose(source, excluded) {\n    if (source == null) return {};\n    var target = {};\n    var sourceKeys = Object.keys(source);\n    var key, i;\n\n    for (i = 0; i < sourceKeys.length; i++) {\n      key = sourceKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      target[key] = source[key];\n    }\n\n    return target;\n  }\n\n  function _objectWithoutProperties(source, excluded) {\n    if (source == null) return {};\n\n    var target = _objectWithoutPropertiesLoose(source, excluded);\n\n    var key, i;\n\n    if (Object.getOwnPropertySymbols) {\n      var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n      for (i = 0; i < sourceSymbolKeys.length; i++) {\n        key = sourceSymbolKeys[i];\n        if (excluded.indexOf(key) >= 0) continue;\n        if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n        target[key] = source[key];\n      }\n    }\n\n    return target;\n  }\n\n  function _slicedToArray(arr, i) {\n    return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n  }\n\n  function _arrayWithHoles(arr) {\n    if (Array.isArray(arr)) return arr;\n  }\n\n  function _iterableToArrayLimit(arr, i) {\n    var _i = arr == null ? null : typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"];\n\n    if (_i == null) return;\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n\n    var _s, _e;\n\n    try {\n      for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  function _unsupportedIterableToArray(o, minLen) {\n    if (!o) return;\n    if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n    var n = Object.prototype.toString.call(o).slice(8, -1);\n    if (n === \"Object\" && o.constructor) n = o.constructor.name;\n    if (n === \"Map\" || n === \"Set\") return Array.from(o);\n    if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n  }\n\n  function _arrayLikeToArray(arr, len) {\n    if (len == null || len > arr.length) len = arr.length;\n\n    for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n    return arr2;\n  }\n\n  function _nonIterableRest() {\n    throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var _excluded = [\"src\", \"checkForExisting\"];\n\n  var scripts = {}; // Check for existing <script> tags with this src. If so, update scripts[src]\n  // and return the new status; otherwise, return undefined.\n\n  var checkExisting = function checkExisting(src) {\n    var existing = document.querySelector(\"script[src=\\\"\".concat(src, \"\\\"]\"));\n\n    if (existing) {\n      // Assume existing <script> tag is already loaded,\n      // and cache that data for future use.\n      return scripts[src] = {\n        loading: false,\n        error: null,\n        scriptEl: existing\n      };\n    }\n\n    return undefined;\n  };\n\n  var isBrowser = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  function useScript(_ref) {\n    var src = _ref.src,\n        _ref$checkForExisting = _ref.checkForExisting,\n        checkForExisting = _ref$checkForExisting === void 0 ? false : _ref$checkForExisting,\n        attributes = _objectWithoutProperties(_ref, _excluded);\n\n    // Check whether some instance of this hook considered this src.\n    var status = src ? scripts[src] : undefined; // If requested, check for existing <script> tags with this src\n    // (unless we've already loaded the script ourselves).\n\n    if (!status && checkForExisting && src && isBrowser) {\n      status = checkExisting(src);\n    }\n\n    var _useState = React.useState(status ? status.loading : Boolean(src)),\n        _useState2 = _slicedToArray(_useState, 2),\n        loading = _useState2[0],\n        setLoading = _useState2[1];\n\n    var _useState3 = React.useState(status ? status.error : null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        error = _useState4[0],\n        setError = _useState4[1]; // Tracks if script is loaded so we can avoid duplicate script tags\n\n\n    var _useState5 = React.useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        scriptLoaded = _useState6[0],\n        setScriptLoaded = _useState6[1];\n\n    React.useEffect(function () {\n      // Nothing to do on server, or if no src specified, or\n      // if script is already loaded or \"error\" state.\n      if (!isBrowser || !src || scriptLoaded || error) return; // Check again for existing <script> tags with this src\n      // in case it's changed since mount.\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n\n      status = scripts[src];\n\n      if (!status && checkForExisting) {\n        status = checkExisting(src);\n      } // Determine or create <script> element to listen to.\n\n\n      var scriptEl;\n\n      if (status) {\n        scriptEl = status.scriptEl;\n      } else {\n        scriptEl = document.createElement('script');\n        scriptEl.src = src;\n        Object.keys(attributes).forEach(function (key) {\n          if (scriptEl[key] === undefined) {\n            scriptEl.setAttribute(key, attributes[key]);\n          } else {\n            scriptEl[key] = attributes[key];\n          }\n        });\n        status = scripts[src] = {\n          loading: true,\n          error: null,\n          scriptEl: scriptEl\n        };\n      } // `status` is now guaranteed to be defined: either the old status\n      // from a previous load, or a newly created one.\n\n\n      var handleLoad = function handleLoad() {\n        if (status) status.loading = false;\n        setLoading(false);\n        setScriptLoaded(true);\n      };\n\n      var handleError = function handleError(error) {\n        if (status) status.error = error;\n        setError(error);\n      };\n\n      scriptEl.addEventListener('load', handleLoad);\n      scriptEl.addEventListener('error', handleError);\n      document.body.appendChild(scriptEl);\n      return function () {\n        scriptEl.removeEventListener('load', handleLoad);\n        scriptEl.removeEventListener('error', handleError); // if we unmount, and we are still loading the script, then\n        // remove from the DOM & cache so we have a clean slate next time.\n        // this is similar to the `removeOnUnmount` behavior of the TS useScript hook\n        // https://github.com/juliencrn/usehooks-ts/blob/20667273744a22dd2cd2c48c38cd3c10f254ae47/packages/usehooks-ts/src/useScript/useScript.ts#L134\n        // but only applied when loading\n\n        if (status && status.loading) {\n          scriptEl.remove();\n          delete scripts[src];\n        }\n      }; // we need to ignore the attributes as they're a new object per call, so we'd never skip an effect call\n    }, [src]);\n    return [loading, error];\n  }\n\n  var renameKeyInObject = function renameKeyInObject(o, oldKey, newKey) {\n    var newObject = {};\n    delete Object.assign(newObject, o, _defineProperty({}, newKey, o[oldKey]))[oldKey];\n    return newObject;\n  };\n  /**\n   * Wrap link handler creation and instance to clean up iframe via destroy() method\n   */\n\n\n  var createPlaidHandler = function createPlaidHandler(config, creator) {\n    var state = {\n      plaid: null,\n      open: false,\n      onExitCallback: null\n    }; // If Plaid is not available, throw an Error\n\n    if (typeof window === 'undefined' || !window.Plaid) {\n      throw new Error('Plaid not loaded');\n    }\n\n    state.plaid = creator(_objectSpread2(_objectSpread2({}, config), {}, {\n      onExit: function onExit(error, metadata) {\n        state.open = false;\n        config.onExit && config.onExit(error, metadata);\n        state.onExitCallback && state.onExitCallback();\n      }\n    }));\n\n    var open = function open() {\n      if (!state.plaid) {\n        return;\n      }\n\n      state.open = true;\n      state.onExitCallback = null;\n      state.plaid.open();\n    };\n\n    var submit = function submit(data) {\n      if (!state.plaid) {\n        return;\n      }\n\n      state.plaid.submit(data);\n    };\n\n    var exit = function exit(exitOptions, callback) {\n      if (!state.open || !state.plaid) {\n        callback && callback();\n        return;\n      }\n\n      state.onExitCallback = callback;\n      state.plaid.exit(exitOptions);\n\n      if (exitOptions && exitOptions.force) {\n        state.open = false;\n      }\n    };\n\n    var destroy = function destroy() {\n      if (!state.plaid) {\n        return;\n      }\n\n      state.plaid.destroy();\n      state.plaid = null;\n    };\n\n    return {\n      open: open,\n      submit: submit,\n      exit: exit,\n      destroy: destroy\n    };\n  };\n\n  var createPlaid = function createPlaid(options, creator) {\n    var config = renameKeyInObject(options, 'publicKey', 'key');\n    return createPlaidHandler(config, creator);\n  };\n\n  var PLAID_LINK_STABLE_URL = 'https://cdn.plaid.com/link/v2/stable/link-initialize.js';\n\n  var noop = function noop() {};\n  /**\n   * This hook loads Plaid script and manages the Plaid Link creation for you.\n   * You get easy open & exit methods to call and loading & error states.\n   *\n   * This will destroy the Plaid UI on un-mounting so it's up to you to be\n   * graceful to the user.\n   *\n   * A new Plaid instance is created every time the token and products options change.\n   * It's up to you to prevent unnecessary re-creations on re-render.\n   */\n\n\n  var usePlaidLink = function usePlaidLink(options) {\n    // Asynchronously load the plaid/link/stable url into the DOM\n    var _useScript = useScript({\n      src: PLAID_LINK_STABLE_URL,\n      checkForExisting: true\n    }),\n        _useScript2 = _slicedToArray(_useScript, 2),\n        loading = _useScript2[0],\n        error = _useScript2[1]; // internal state\n\n\n    var _useState = React.useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        plaid = _useState2[0],\n        setPlaid = _useState2[1];\n\n    var _useState3 = React.useState(false),\n        _useState4 = _slicedToArray(_useState3, 2),\n        iframeLoaded = _useState4[0],\n        setIframeLoaded = _useState4[1];\n\n    var products = (options.product || []).slice().sort().join(',');\n    React.useEffect(function () {\n      // If the link.js script is still loading, return prematurely\n      if (loading) {\n        return;\n      } // If the token, publicKey, and received redirect URI are undefined, return prematurely\n\n\n      if (!options.token && !options.publicKey && !options.receivedRedirectUri) {\n        return;\n      }\n\n      if (error || !window.Plaid) {\n        // eslint-disable-next-line no-console\n        console.error('Error loading Plaid', error);\n        return;\n      } // if an old plaid instance exists, destroy it before\n      // creating a new one\n\n\n      if (plaid != null) {\n        plaid.exit({\n          force: true\n        }, function () {\n          return plaid.destroy();\n        });\n      }\n\n      var next = createPlaid(_objectSpread2(_objectSpread2({}, options), {}, {\n        onLoad: function onLoad() {\n          setIframeLoaded(true);\n          options.onLoad && options.onLoad();\n        }\n      }), window.Plaid.create);\n      setPlaid(next); // destroy the Plaid iframe factory\n\n      return function () {\n        return next.exit({\n          force: true\n        }, function () {\n          return next.destroy();\n        });\n      };\n    }, [loading, error, options.publicKey, options.token, products]);\n    var ready = plaid != null && (!loading || iframeLoaded);\n\n    var openNoOp = function openNoOp() {\n      if (!options.token) {\n        console.warn('react-plaid-link: You cannot call open() without a valid token supplied to usePlaidLink. This is a no-op.');\n      }\n    };\n\n    return {\n      error: error,\n      ready: ready,\n      submit: plaid ? plaid.submit : noop,\n      exit: plaid ? plaid.exit : noop,\n      open: plaid ? plaid.open : openNoOp\n    };\n  };\n\n  var _excluded$1 = [\"children\", \"style\", \"className\"];\n  var PlaidLink = function PlaidLink(props) {\n    var children = props.children,\n        style = props.style,\n        className = props.className,\n        config = _objectWithoutProperties(props, _excluded$1);\n\n    var _usePlaidLink = usePlaidLink(_objectSpread2({}, config)),\n        error = _usePlaidLink.error,\n        open = _usePlaidLink.open;\n\n    return /*#__PURE__*/React__default.createElement(\"button\", {\n      disabled: Boolean(error),\n      type: \"button\",\n      className: className,\n      style: _objectSpread2({\n        padding: '6px 4px',\n        outline: 'none',\n        background: '#FFFFFF',\n        border: '2px solid #F1F1F1',\n        borderRadius: '4px'\n      }, style),\n      onClick: function onClick() {\n        return open();\n      }\n    }, children);\n  };\n  PlaidLink.displayName = 'PlaidLink';\n\n  var PlaidEmbeddedLink = function PlaidEmbeddedLink(props) {\n    var style = props.style,\n        className = props.className,\n        onSuccess = props.onSuccess,\n        onExit = props.onExit,\n        onLoad = props.onLoad,\n        onEvent = props.onEvent,\n        token = props.token,\n        receivedRedirectUri = props.receivedRedirectUri;\n    var config = React.useMemo(function () {\n      return {\n        onSuccess: onSuccess,\n        onExit: onExit,\n        onLoad: onLoad,\n        onEvent: onEvent,\n        token: token,\n        receivedRedirectUri: receivedRedirectUri\n      };\n    }, [onSuccess, onExit, onLoad, onEvent, token, receivedRedirectUri]); // Asynchronously load the plaid/link/stable url into the DOM\n\n    var _useScript = useScript({\n      src: PLAID_LINK_STABLE_URL,\n      checkForExisting: true\n    }),\n        _useScript2 = _slicedToArray(_useScript, 2),\n        loading = _useScript2[0],\n        error = _useScript2[1];\n\n    var embeddedLinkTarget = React.useRef(null);\n    React.useEffect(function () {\n      // If the external link JS script is still loading, return prematurely\n      if (loading) {\n        return;\n      }\n\n      if (error || !window.Plaid) {\n        // eslint-disable-next-line no-console\n        console.error('Error loading Plaid', error);\n        return;\n      }\n\n      if (config.token == null || config.token == '') {\n        console.error('A token is required to initialize embedded Plaid Link');\n        return;\n      } // The embedded Link interface doesn't use the `usePlaidLink` hook to manage\n      // its Plaid Link instance because the embedded Link integration in link-initialize\n      // maintains its own handler internally.\n\n\n      var _window$Plaid$createE = window.Plaid.createEmbedded(_objectSpread2({}, config), embeddedLinkTarget.current),\n          destroy = _window$Plaid$createE.destroy; // Clean up embedded Link component on unmount\n\n\n      return function () {\n        destroy();\n      };\n    }, [loading, error, config, embeddedLinkTarget]);\n    return /*#__PURE__*/React__default.createElement(\"div\", {\n      style: style,\n      className: className,\n      ref: embeddedLinkTarget\n    });\n  };\n\n  // The following event names are stable and will not be deprecated or changed\n\n  (function (PlaidLinkStableEvent) {\n    PlaidLinkStableEvent[\"OPEN\"] = \"OPEN\";\n    PlaidLinkStableEvent[\"EXIT\"] = \"EXIT\";\n    PlaidLinkStableEvent[\"HANDOFF\"] = \"HANDOFF\";\n    PlaidLinkStableEvent[\"SELECT_INSTITUTION\"] = \"SELECT_INSTITUTION\";\n    PlaidLinkStableEvent[\"ERROR\"] = \"ERROR\";\n    PlaidLinkStableEvent[\"BANK_INCOME_INSIGHTS_COMPLETED\"] = \"BANK_INCOME_INSIGHTS_COMPLETED\";\n    PlaidLinkStableEvent[\"IDENTITY_VERIFICATION_PASS_SESSION\"] = \"IDENTITY_VERIFICATION_PASS_SESSION\";\n    PlaidLinkStableEvent[\"IDENTITY_VERIFICATION_FAIL_SESSION\"] = \"IDENTITY_VERIFICATION_FAIL_SESSION\";\n  })(exports.PlaidLinkStableEvent || (exports.PlaidLinkStableEvent = {}));\n\n  exports.PlaidEmbeddedLink = PlaidEmbeddedLink;\n  exports.PlaidLink = PlaidLink;\n  exports.usePlaidLink = usePlaidLink;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n"],"mappings":"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"}